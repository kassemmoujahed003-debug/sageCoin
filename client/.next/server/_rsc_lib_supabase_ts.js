"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_rsc_lib_supabase_ts";
exports.ids = ["_rsc_lib_supabase_ts"];
exports.modules = {

/***/ "(rsc)/./lib/supabase.ts":
/*!*************************!*\
  !*** ./lib/supabase.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAdminClient: () => (/* binding */ createAdminClient),\n/* harmony export */   createClientWithToken: () => (/* binding */ createClientWithToken),\n/* harmony export */   createServerClient: () => (/* binding */ createServerClient),\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/../node_modules/@supabase/supabase-js/dist/index.mjs\");\n\nconst supabaseUrl = \"https://apocthoyjbbetumecndc.supabase.co\";\n// Accept both NEXT_PUBLIC_SUPABASE_ANON_KEY and NEXT_PUBLIC_SUPABASE_PUBLISHABLE_DEFAULT_KEY\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || \"sb_publishable_qIIz93jnIa33xqyOwvsuSQ_QJR-PvDQ\";\nif (!supabaseUrl || !supabaseAnonKey) {\n    console.error(\"Missing Supabase environment variables:\");\n    console.error(\"NEXT_PUBLIC_SUPABASE_URL:\", supabaseUrl ? \"✓ Set\" : \"✗ Missing\");\n    console.error(\"NEXT_PUBLIC_SUPABASE_ANON_KEY or NEXT_PUBLIC_SUPABASE_PUBLISHABLE_DEFAULT_KEY:\", supabaseAnonKey ? \"✓ Set\" : \"✗ Missing\");\n// Don't throw during module load, handle in API routes instead\n}\n// Client-side Supabase client (use in components)\n// Will be null if env vars are missing - check before using\nconst supabase = supabaseUrl && supabaseAnonKey ? (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey) : null;\n// Server-side Supabase client (use in API routes)\n// Creates a client with the anon key for RLS-enabled operations\nfunction createServerClient() {\n    if (!supabaseUrl || !supabaseAnonKey) {\n        throw new Error(\"Missing Supabase environment variables. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY in .env.local\");\n    }\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey, {\n        auth: {\n            autoRefreshToken: false,\n            persistSession: false\n        }\n    });\n}\n// Create a Supabase client with a user's access token\n// Use this when you need to perform operations as a specific user (for RLS)\nasync function createClientWithToken(accessToken) {\n    if (!supabaseUrl || !supabaseAnonKey) {\n        throw new Error(\"Missing Supabase environment variables. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY in .env.local\");\n    }\n    // Create client with the access token in the Authorization header\n    // This allows RLS policies to access auth.uid() via the JWT\n    const client = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey, {\n        global: {\n            headers: {\n                Authorization: `Bearer ${accessToken}`\n            }\n        },\n        auth: {\n            autoRefreshToken: false,\n            persistSession: false,\n            detectSessionInUrl: false\n        }\n    });\n    // Verify the token is valid\n    const { data: { user }, error } = await client.auth.getUser(accessToken);\n    if (error || !user) {\n        throw new Error(`Failed to authenticate token: ${error?.message || \"Unknown error\"}`);\n    }\n    return client;\n}\n// Create an admin Supabase client with service role key (server-side only)\n// Use this for admin operations like auto-confirming users\n// WARNING: Never expose the service role key to the client!\nfunction createAdminClient() {\n    const supabaseUrl = \"https://apocthoyjbbetumecndc.supabase.co\";\n    const serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n    if (!supabaseUrl || !serviceRoleKey) {\n        throw new Error(\"Missing Supabase admin environment variables. Please set NEXT_PUBLIC_SUPABASE_URL and SUPABASE_SERVICE_ROLE_KEY in .env.local\");\n    }\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, serviceRoleKey, {\n        auth: {\n            autoRefreshToken: false,\n            persistSession: false\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBb0U7QUFNcEUsTUFBTUMsY0FBY0MsMENBQW9DO0FBQ3hELDZGQUE2RjtBQUM3RixNQUFNRyxrQkFBa0JILFFBQVFDLEdBQUcsQ0FBQ0csNkJBQTZCLElBQUlKLGdEQUF3RDtBQUU3SCxJQUFJLENBQUNELGVBQWUsQ0FBQ0ksaUJBQWlCO0lBQ3BDRyxRQUFRQyxLQUFLLENBQUM7SUFDZEQsUUFBUUMsS0FBSyxDQUFDLDZCQUE2QlIsY0FBYyxVQUFVO0lBQ25FTyxRQUFRQyxLQUFLLENBQUMsa0ZBQWtGSixrQkFBa0IsVUFBVTtBQUM1SCwrREFBK0Q7QUFDakU7QUFFQSxrREFBa0Q7QUFDbEQsNERBQTREO0FBQ3JELE1BQU1LLFdBQVdULGVBQWVJLGtCQUNuQ0wsbUVBQVlBLENBQWNDLGFBQWFJLG1CQUN2QyxLQUFJO0FBRVIsa0RBQWtEO0FBQ2xELGdFQUFnRTtBQUN6RCxTQUFTTTtJQUNkLElBQUksQ0FBQ1YsZUFBZSxDQUFDSSxpQkFBaUI7UUFDcEMsTUFBTSxJQUFJTyxNQUFNO0lBQ2xCO0lBQ0EsT0FBT1osbUVBQVlBLENBQWNDLGFBQWFJLGlCQUFpQjtRQUM3RFEsTUFBTTtZQUNKQyxrQkFBa0I7WUFDbEJDLGdCQUFnQjtRQUNsQjtJQUNGO0FBQ0Y7QUFFQSxzREFBc0Q7QUFDdEQsNEVBQTRFO0FBQ3JFLGVBQWVDLHNCQUFzQkMsV0FBbUI7SUFDN0QsSUFBSSxDQUFDaEIsZUFBZSxDQUFDSSxpQkFBaUI7UUFDcEMsTUFBTSxJQUFJTyxNQUFNO0lBQ2xCO0lBRUEsa0VBQWtFO0lBQ2xFLDREQUE0RDtJQUM1RCxNQUFNTSxTQUFTbEIsbUVBQVlBLENBQWNDLGFBQWFJLGlCQUFpQjtRQUNyRWMsUUFBUTtZQUNOQyxTQUFTO2dCQUNQQyxlQUFlLENBQUMsT0FBTyxFQUFFSixZQUFZLENBQUM7WUFDeEM7UUFDRjtRQUNBSixNQUFNO1lBQ0pDLGtCQUFrQjtZQUNsQkMsZ0JBQWdCO1lBQ2hCTyxvQkFBb0I7UUFDdEI7SUFDRjtJQUVBLDRCQUE0QjtJQUM1QixNQUFNLEVBQUVDLE1BQU0sRUFBRUMsSUFBSSxFQUFFLEVBQUVmLEtBQUssRUFBRSxHQUFHLE1BQU1TLE9BQU9MLElBQUksQ0FBQ1ksT0FBTyxDQUFDUjtJQUM1RCxJQUFJUixTQUFTLENBQUNlLE1BQU07UUFDbEIsTUFBTSxJQUFJWixNQUFNLENBQUMsOEJBQThCLEVBQUVILE9BQU9pQixXQUFXLGdCQUFnQixDQUFDO0lBQ3RGO0lBRUEsT0FBT1I7QUFDVDtBQUVBLDJFQUEyRTtBQUMzRSwyREFBMkQ7QUFDM0QsNERBQTREO0FBQ3JELFNBQVNTO0lBQ2QsTUFBTTFCLGNBQWNDLDBDQUFvQztJQUN4RCxNQUFNMEIsaUJBQWlCMUIsUUFBUUMsR0FBRyxDQUFDMEIseUJBQXlCO0lBRTVELElBQUksQ0FBQzVCLGVBQWUsQ0FBQzJCLGdCQUFnQjtRQUNuQyxNQUFNLElBQUloQixNQUFNO0lBQ2xCO0lBRUEsT0FBT1osbUVBQVlBLENBQWNDLGFBQWEyQixnQkFBZ0I7UUFDNURmLE1BQU07WUFDSkMsa0JBQWtCO1lBQ2xCQyxnQkFBZ0I7UUFDbEI7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2FnZWNvaW4tY2xpZW50Ly4vbGliL3N1cGFiYXNlLnRzP2M5OWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50LCBTdXBhYmFzZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcydcclxuXHJcbi8vIFVzZSAnYW55JyBmb3IgRGF0YWJhc2UgdHlwZSB0byBhdm9pZCBzdHJpY3QgdHlwZSBjaGVja2luZyBpc3N1ZXNcclxuLy8gVGhlIHN0cmljdCBEYXRhYmFzZSB0eXBlIGNhdXNlcyAnbmV2ZXInIHR5cGUgZXJyb3JzIHdpdGggY2VydGFpbiBTdXBhYmFzZSBvcGVyYXRpb25zXHJcbnR5cGUgQW55RGF0YWJhc2UgPSBhbnlcclxuXHJcbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMXHJcbi8vIEFjY2VwdCBib3RoIE5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIGFuZCBORVhUX1BVQkxJQ19TVVBBQkFTRV9QVUJMSVNIQUJMRV9ERUZBVUxUX0tFWVxyXG5jb25zdCBzdXBhYmFzZUFub25LZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSB8fCBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9QVUJMSVNIQUJMRV9ERUZBVUxUX0tFWVxyXG5cclxuaWYgKCFzdXBhYmFzZVVybCB8fCAhc3VwYWJhc2VBbm9uS2V5KSB7XHJcbiAgY29uc29sZS5lcnJvcignTWlzc2luZyBTdXBhYmFzZSBlbnZpcm9ubWVudCB2YXJpYWJsZXM6JylcclxuICBjb25zb2xlLmVycm9yKCdORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkw6Jywgc3VwYWJhc2VVcmwgPyAn4pyTIFNldCcgOiAn4pyXIE1pc3NpbmcnKVxyXG4gIGNvbnNvbGUuZXJyb3IoJ05FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIG9yIE5FWFRfUFVCTElDX1NVUEFCQVNFX1BVQkxJU0hBQkxFX0RFRkFVTFRfS0VZOicsIHN1cGFiYXNlQW5vbktleSA/ICfinJMgU2V0JyA6ICfinJcgTWlzc2luZycpXHJcbiAgLy8gRG9uJ3QgdGhyb3cgZHVyaW5nIG1vZHVsZSBsb2FkLCBoYW5kbGUgaW4gQVBJIHJvdXRlcyBpbnN0ZWFkXHJcbn1cclxuXHJcbi8vIENsaWVudC1zaWRlIFN1cGFiYXNlIGNsaWVudCAodXNlIGluIGNvbXBvbmVudHMpXHJcbi8vIFdpbGwgYmUgbnVsbCBpZiBlbnYgdmFycyBhcmUgbWlzc2luZyAtIGNoZWNrIGJlZm9yZSB1c2luZ1xyXG5leHBvcnQgY29uc3Qgc3VwYWJhc2UgPSBzdXBhYmFzZVVybCAmJiBzdXBhYmFzZUFub25LZXkgXHJcbiAgPyBjcmVhdGVDbGllbnQ8QW55RGF0YWJhc2U+KHN1cGFiYXNlVXJsLCBzdXBhYmFzZUFub25LZXkpXHJcbiAgOiBudWxsXHJcblxyXG4vLyBTZXJ2ZXItc2lkZSBTdXBhYmFzZSBjbGllbnQgKHVzZSBpbiBBUEkgcm91dGVzKVxyXG4vLyBDcmVhdGVzIGEgY2xpZW50IHdpdGggdGhlIGFub24ga2V5IGZvciBSTFMtZW5hYmxlZCBvcGVyYXRpb25zXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTZXJ2ZXJDbGllbnQoKTogU3VwYWJhc2VDbGllbnQ8QW55RGF0YWJhc2U+IHtcclxuICBpZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZUFub25LZXkpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBTdXBhYmFzZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMuIFBsZWFzZSBzZXQgTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIGFuZCBORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSBpbiAuZW52LmxvY2FsJylcclxuICB9XHJcbiAgcmV0dXJuIGNyZWF0ZUNsaWVudDxBbnlEYXRhYmFzZT4oc3VwYWJhc2VVcmwsIHN1cGFiYXNlQW5vbktleSwge1xyXG4gICAgYXV0aDoge1xyXG4gICAgICBhdXRvUmVmcmVzaFRva2VuOiBmYWxzZSxcclxuICAgICAgcGVyc2lzdFNlc3Npb246IGZhbHNlXHJcbiAgICB9XHJcbiAgfSlcclxufVxyXG5cclxuLy8gQ3JlYXRlIGEgU3VwYWJhc2UgY2xpZW50IHdpdGggYSB1c2VyJ3MgYWNjZXNzIHRva2VuXHJcbi8vIFVzZSB0aGlzIHdoZW4geW91IG5lZWQgdG8gcGVyZm9ybSBvcGVyYXRpb25zIGFzIGEgc3BlY2lmaWMgdXNlciAoZm9yIFJMUylcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUNsaWVudFdpdGhUb2tlbihhY2Nlc3NUb2tlbjogc3RyaW5nKTogUHJvbWlzZTxTdXBhYmFzZUNsaWVudDxBbnlEYXRhYmFzZT4+IHtcclxuICBpZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZUFub25LZXkpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBTdXBhYmFzZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMuIFBsZWFzZSBzZXQgTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIGFuZCBORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSBpbiAuZW52LmxvY2FsJylcclxuICB9XHJcbiAgXHJcbiAgLy8gQ3JlYXRlIGNsaWVudCB3aXRoIHRoZSBhY2Nlc3MgdG9rZW4gaW4gdGhlIEF1dGhvcml6YXRpb24gaGVhZGVyXHJcbiAgLy8gVGhpcyBhbGxvd3MgUkxTIHBvbGljaWVzIHRvIGFjY2VzcyBhdXRoLnVpZCgpIHZpYSB0aGUgSldUXHJcbiAgY29uc3QgY2xpZW50ID0gY3JlYXRlQ2xpZW50PEFueURhdGFiYXNlPihzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5LCB7XHJcbiAgICBnbG9iYWw6IHtcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthY2Nlc3NUb2tlbn1gXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBhdXRoOiB7XHJcbiAgICAgIGF1dG9SZWZyZXNoVG9rZW46IGZhbHNlLFxyXG4gICAgICBwZXJzaXN0U2Vzc2lvbjogZmFsc2UsXHJcbiAgICAgIGRldGVjdFNlc3Npb25JblVybDogZmFsc2VcclxuICAgIH1cclxuICB9KVxyXG4gIFxyXG4gIC8vIFZlcmlmeSB0aGUgdG9rZW4gaXMgdmFsaWRcclxuICBjb25zdCB7IGRhdGE6IHsgdXNlciB9LCBlcnJvciB9ID0gYXdhaXQgY2xpZW50LmF1dGguZ2V0VXNlcihhY2Nlc3NUb2tlbilcclxuICBpZiAoZXJyb3IgfHwgIXVzZXIpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGF1dGhlbnRpY2F0ZSB0b2tlbjogJHtlcnJvcj8ubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcid9YClcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIGNsaWVudFxyXG59XHJcblxyXG4vLyBDcmVhdGUgYW4gYWRtaW4gU3VwYWJhc2UgY2xpZW50IHdpdGggc2VydmljZSByb2xlIGtleSAoc2VydmVyLXNpZGUgb25seSlcclxuLy8gVXNlIHRoaXMgZm9yIGFkbWluIG9wZXJhdGlvbnMgbGlrZSBhdXRvLWNvbmZpcm1pbmcgdXNlcnNcclxuLy8gV0FSTklORzogTmV2ZXIgZXhwb3NlIHRoZSBzZXJ2aWNlIHJvbGUga2V5IHRvIHRoZSBjbGllbnQhXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBZG1pbkNsaWVudCgpOiBTdXBhYmFzZUNsaWVudDxBbnlEYXRhYmFzZT4ge1xyXG4gIGNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMXHJcbiAgY29uc3Qgc2VydmljZVJvbGVLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZXHJcbiAgXHJcbiAgaWYgKCFzdXBhYmFzZVVybCB8fCAhc2VydmljZVJvbGVLZXkpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBTdXBhYmFzZSBhZG1pbiBlbnZpcm9ubWVudCB2YXJpYWJsZXMuIFBsZWFzZSBzZXQgTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIGFuZCBTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIGluIC5lbnYubG9jYWwnKVxyXG4gIH1cclxuICBcclxuICByZXR1cm4gY3JlYXRlQ2xpZW50PEFueURhdGFiYXNlPihzdXBhYmFzZVVybCwgc2VydmljZVJvbGVLZXksIHtcclxuICAgIGF1dGg6IHtcclxuICAgICAgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsXHJcbiAgICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZVxyXG4gICAgfVxyXG4gIH0pXHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUFub25LZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1BVQkxJU0hBQkxFX0RFRkFVTFRfS0VZIiwiY29uc29sZSIsImVycm9yIiwic3VwYWJhc2UiLCJjcmVhdGVTZXJ2ZXJDbGllbnQiLCJFcnJvciIsImF1dGgiLCJhdXRvUmVmcmVzaFRva2VuIiwicGVyc2lzdFNlc3Npb24iLCJjcmVhdGVDbGllbnRXaXRoVG9rZW4iLCJhY2Nlc3NUb2tlbiIsImNsaWVudCIsImdsb2JhbCIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwiZGV0ZWN0U2Vzc2lvbkluVXJsIiwiZGF0YSIsInVzZXIiLCJnZXRVc2VyIiwibWVzc2FnZSIsImNyZWF0ZUFkbWluQ2xpZW50Iiwic2VydmljZVJvbGVLZXkiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase.ts\n");

/***/ })

};
;